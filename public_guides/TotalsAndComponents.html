
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Totals and Components in Python &#8212; SML Public Methods</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'public_guides/TotalsAndComponents';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Accessibility Statement" href="../AccessibilityStatement.html" />
    <link rel="prev" title="Thousand Pound Correction in Python" href="ThousandPoundCorrection.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.svg" class="logo__image only-light" alt="SML Public Methods - Home"/>
    <script>document.write(`<img src="../_static/logo.svg" class="logo__image only-dark" alt="SML Public Methods - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    SML User Guides
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Methods</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="CellKeyPerturbation_Py.html">Cell Key Perturbation in Python</a></li>




<li class="toctree-l1"><a class="reference internal" href="DateAdjustment.html">Date Adjustment in Python</a></li>




<li class="toctree-l1"><a class="reference internal" href="SelectiveEditing.html">Selective Editing in Python</a></li>




<li class="toctree-l1"><a class="reference internal" href="ThousandPoundCorrection.html">Thousand Pound Correction in Python</a></li>




<li class="toctree-l1 current active"><a class="current reference internal" href="#">Totals and Components in Python</a></li>




</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Accessibility</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../AccessibilityStatement.html">Accessibility Statement</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ONSDigital/sml-jbook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ONSDigital/sml-jbook/issues/new?title=Issue%20on%20page%20%2Fpublic_guides/TotalsAndComponents.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/public_guides/TotalsAndComponents.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Totals and Components in Python</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Totals and Components in Python</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#sml-user-guide">SML User Guide</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#user-notes">User Notes</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-and-installing-the-method">Finding and Installing the method</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#requirements-and-dependencies">Requirements and Dependencies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#assumptions-and-validity">Assumptions and Validity</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-use-the-method">How to Use the Method</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method-input">Method Input</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method-output">Method Output</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-synthetic-data">Example (Synthetic) Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#worked-example">Worked Example</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#methodology">Methodology</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#terminology">Terminology</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#statistical-process-flow-formal-definition">Statistical Process Flow / Formal Definition</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculations">Calculations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-information">Additional Information</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#license">License</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="totals-and-components-in-python">
<h1>Totals and Components in Python<a class="headerlink" href="#totals-and-components-in-python" title="Link to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="sml-user-guide">
<h1>SML User Guide<a class="headerlink" href="#sml-user-guide" title="Link to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Descriptive</p></th>
<th class="head text-left"><p>Details</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>Support Area</p></td>
<td class="text-left"><p>Methodology - Editing &amp; Imputation</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Method Theme</p></td>
<td class="text-left"><p>Editing</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Status</p></td>
<td class="text-left"><p>Ready to Use</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Inputs</p></td>
<td class="text-left"><p>identifier, total, components, amend_total, predictive, precision, auxiliary, absolute_difference_threshold, percentage_difference_threshold</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Outputs</p></td>
<td class="text-left"><p>object containing results</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>Method Version</p></td>
<td class="text-left"><p>1.2.5</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>Code Repository</p></td>
<td class="text-left"><p><a class="github reference external" href="https://github.com/ONSdigital/sml-python-small/blob/main/sml_small/editing/totals_and_components/totals_and_components.py">ONSdigital/sml-python-small</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h2>
<p>The automatic editing method for totals and components correction is currently used in ONS business surveys to ensure fixed relationships between variables are satisfied. For example, when a total (e.g., total employment is collected along with the component breakdown (e.g., full-time male, full-time female, part-time male, part-time female)</p>
<p>The primary use of the method is to automatically detect and correct errors in respondent data where fixed relationships have not been satisfied to improve the efficiency of the editing process, reduce the burden on respondents and survey validators and improve overall data quality.</p>
<p>This method can also be used to ensure fixed relationships between variables are satisfied in other data types such as imputed data to improve overall data quality.</p>
<p>This method can only be applied if all the components are of the same type e.g., all returned or imputed. Maintaining a total and components relationship where components are a combination of types (e.g., returned and imputed) is outside of the scope for this method.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="user-notes">
<h1>User Notes<a class="headerlink" href="#user-notes" title="Link to this heading">#</a></h1>
<section id="finding-and-installing-the-method">
<h2>Finding and Installing the method<a class="headerlink" href="#finding-and-installing-the-method" title="Link to this heading">#</a></h2>
<p><strong>This method requires Python &gt;=3.7.1, &lt;4.0.0 and uses the Pandas package v1.5.3.</strong></p>
<p>If you are using Pandas &gt;=2.0 this will be uninstalled and v1.5.3 installed.</p>
<blockquote>
<div><p><sub>To prevent downgrading software on your system, we recommend creating a virtual environment to install and run SML methods. This will enable you to install the method with the required version of Python, etc, without disrupting the newer versions you may be running on your system. If you’re new to virtual environments, please see our guidence on installing a method in the Help centre of our SML website to get started. Otherwise, use your preferred method to create a virtual environment with the correct software versions.</sub></p>
</div></blockquote>
<p>The method package can be installed from Artifactory/PyPI using the following code in the terminal or command prompt:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">sml_small</span> 
</pre></div>
</div>
<p>In your code you can import the method using:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sml_small.editing</span><span class="w"> </span><span class="kn">import</span> <span class="n">totals_and_components</span>
</pre></div>
</div>
</section>
<section id="requirements-and-dependencies">
<h2>Requirements and Dependencies<a class="headerlink" href="#requirements-and-dependencies" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>This method requires input data.</p></li>
</ul>
</section>
<section id="assumptions-and-validity">
<h2>Assumptions and Validity<a class="headerlink" href="#assumptions-and-validity" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Target value and predictive value are well correlated</p></li>
<li><p>Target value and auxiliary value, if required, are well correlated</p></li>
<li><p>Thresholds set are a good indication of whether a value should be corrected</p></li>
<li><p>The method can only observe and satisfy one fixed relationship at a time (i.e., only one set of components and total)</p></li>
<li><p>Both the total value and at least one corresponding component are populated for the target period</p></li>
<li><p>The components are all the same data type e.g., all returned or imputed. The total variable type does not impact this.</p></li>
</ul>
</section>
<section id="how-to-use-the-method">
<h2>How to Use the Method<a class="headerlink" href="#how-to-use-the-method" title="Link to this heading">#</a></h2>
<section id="method-input">
<h3>Method Input<a class="headerlink" href="#method-input" title="Link to this heading">#</a></h3>
<p>Input records must include the following fields of the correct types:</p>
<ul class="simple">
<li><p>Unique Identifier – Any e.g. Business Reporting Unit</p></li>
<li><p>Total Variable – Target period total, numeric</p></li>
<li><p>Components Variable – Corresponding list of Total variable’s components, numeric – nulls allowed</p></li>
<li><p>Amend Total – Select whether Total Variable for the target period should be automatically corrected, Boolean</p></li>
<li><p>Predictive Variable – Previous or current period total, numeric</p></li>
<li><p>Precision - The precision value determines the level of accuracy for our floating point calculations – Numeric – nulls allowed</p></li>
<li><p>Auxiliary Variable – optional, numeric – nulls allowed</p></li>
<li><p>Absolute Difference Threshold - represented as a decimal</p></li>
<li><p>Percentage Difference Threshold - represented as a decimal</p></li>
</ul>
<p>Note:</p>
<ul class="simple">
<li><p>Although Predictive Variable and Auxiliary Variable are both optional, one
of these will need to be provided for the method to run without stopping early.</p></li>
<li><p>In the same way, one of Absolute Difference Threshold and Percentage Difference
Threshold need to be provided.</p></li>
<li><p>Populating the parameters with zeros is not equivalent to leaving them blank.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>identifier</p></th>
<th class="head"><p>total</p></th>
<th class="head"><p>comp_1</p></th>
<th class="head"><p>comp_2</p></th>
<th class="head"><p>comp_3</p></th>
<th class="head"><p>comp_4</p></th>
<th class="head"><p>amend_total</p></th>
<th class="head"><p>predictive</p></th>
<th class="head"><p>precision</p></th>
<th class="head"><p>auxiliary</p></th>
<th class="head"><p>absolute_difference_threshold</p></th>
<th class="head"><p>percentage_difference_threshold</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>1689</p></td>
<td><p>632</p></td>
<td><p>732</p></td>
<td><p>101</p></td>
<td><p>165</p></td>
<td><p>False</p></td>
<td><p>1689</p></td>
<td><p>10</p></td>
<td><p></p></td>
<td><p>28</p></td>
<td><p>0.1</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>0</p></td>
<td><p>7</p></td>
<td><p>0</p></td>
<td><p>2</p></td>
<td><p>2</p></td>
<td><p>True</p></td>
<td><p>0</p></td>
<td><p>28</p></td>
<td><p></p></td>
<td><p>11</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>11</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>False</p></td>
<td><p>11</p></td>
<td><p>28</p></td>
<td><p></p></td>
<td><p>11</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>10811</p></td>
<td><p>9201</p></td>
<td><p>866</p></td>
<td><p>632</p></td>
<td><p>112</p></td>
<td><p>True</p></td>
<td><p>10811</p></td>
<td><p>28</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>0.1</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>12492</p></td>
<td><p>9201</p></td>
<td><p>866</p></td>
<td><p>632</p></td>
<td><p>112</p></td>
<td><p>True</p></td>
<td><p>12492</p></td>
<td><p>28</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>0.1</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="method-output">
<h3>Method Output<a class="headerlink" href="#method-output" title="Link to this heading">#</a></h3>
<p>Output records shall always contain the following fields with the following types:</p>
<ul class="simple">
<li><p>Unique Identifier – Any e.g., Business Reporting Unit</p></li>
<li><p>Absolute Difference – Numeric, nulls allowed</p></li>
<li><p>Low Percent – Numeric, nulls allowed</p></li>
<li><p>High Percent – Numeric, nulls allowed</p></li>
<li><p>Final Total Variable – Numeric</p></li>
<li><p>Final Components Variable – Numeric</p></li>
<li><p>TCC Marker – To indicate the result of the Totals Components Correction method, string</p></li>
</ul>
<p>The TCC marker returned show if and what the method has corrected:</p>
<ul class="simple">
<li><p>T = Total corrected</p></li>
<li><p>C = Components corrected</p></li>
<li><p>N = No correction required, i.e., the total is equal to the components sum</p></li>
<li><p>M = Manual editing required. This marker will identify contributors where the discrepancy between the total and component is deemed too large for automatic correction.</p></li>
<li><p>S = Method stops. This may be due to insufficient data to run the method, or one of the relevant zero cases has occurred.</p></li>
</ul>
<p><strong>Example</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>identifier</p></th>
<th class="head"><p>absolute_difference</p></th>
<th class="head"><p>lower_percentage_threshold</p></th>
<th class="head"><p>upper_percentage_threshold</p></th>
<th class="head"><p>final_total</p></th>
<th class="head"><p>final_components</p></th>
<th class="head"><p>tcc_marker</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>59</p></td>
<td><p>1467</p></td>
<td><p>1793</p></td>
<td><p>1689</p></td>
<td><p>[‘654.8760735’ ,’758.4957055’, ‘104.6558282’, ‘170.9723927’]</p></td>
<td><p>C</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>11</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>11</p></td>
<td><p>[‘7’, ‘0’, ‘2’, ‘2’]</p></td>
<td><p>T</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>11</p></td>
<td><p>[‘0’, ‘0’, ‘0’, ‘0’]</p></td>
<td><p>S</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p></p></td>
<td><p>9729.9</p></td>
<td><p>11892.1</p></td>
<td><p>10811</p></td>
<td><p>[‘9201’, ‘866’, ‘632’, ‘112’]</p></td>
<td><p>N</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p></p></td>
<td><p>9729.9</p></td>
<td><p>11892.1</p></td>
<td><p>12492</p></td>
<td><p>[‘9201’, ‘866’, ‘632’, ‘112’]</p></td>
<td><p>M</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="example-synthetic-data">
<h2>Example (Synthetic) Data<a class="headerlink" href="#example-synthetic-data" title="Link to this heading">#</a></h2>
<p>Files containing the example input &amp; output data given above can be found in the <a class="reference external" href="https://github.com/ONSdigital/sml-public/tree/main/example_data/TotalsAndComponents">example_data</a> folder of this repository.</p>
<p>Input data:</p>
<p><code class="docutils literal notranslate"> <span class="pre">totals_and_components_input_data_example.csv</span> </code></p>
<p>Expected output after running the worked example:</p>
<p><code class="docutils literal notranslate"> <span class="pre">totals_and_components_output_data_example.csv</span> </code></p>
</section>
<section id="worked-example">
<h2>Worked Example<a class="headerlink" href="#worked-example" title="Link to this heading">#</a></h2>
<p>The method can be used in two ways:</p>
<ol class="arabic simple">
<li><p>a single record can be specified as the input parameters to the method</p></li>
<li><p>mutiple records can be supplied as a pandas dataframe to a wrapper function</p></li>
</ol>
<p>The following code can be used to run totals &amp; components on a single record.
This example uses the first record in the example dataset.</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sml_small.editing</span><span class="w"> </span><span class="kn">import</span> <span class="n">totals_and_components</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">totals_and_components</span><span class="p">(</span>
    <span class="n">identifier</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="n">total</span><span class="o">=</span><span class="mi">1689</span><span class="p">,</span>
    <span class="n">components</span><span class="o">=</span>
    <span class="p">[</span>
        <span class="p">(</span><span class="mi">632</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">732</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">101</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">165</span><span class="p">)</span>
    <span class="p">],</span>
    <span class="n">amend_total</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">predictive</span><span class="o">=</span><span class="mi">1689</span><span class="p">,</span>
    <span class="n">precision</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">auxiliary</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">absolute_difference_threshold</span><span class="o">=</span><span class="mi">28</span><span class="p">,</span>
    <span class="n">percentage_difference_threshold</span><span class="o">=</span><span class="mf">0.1</span>
<span class="p">)</span>

<span class="c1"># The output will be returned as an object.</span>
<span class="c1"># You will need to destructure the object to extract the values and</span>
<span class="c1"># one way of doing this is using the built-in function vars().</span>
<span class="c1"># vars() is used to return the __dict__attribute for the specified</span>
<span class="c1"># module, class, instance or any other object with a</span>
<span class="c1"># __dict__attribute</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</pre></div>
</div>
<p>Alternatively, a wrapper function is supplied with the method to run
totals &amp; components for all records in a pandas dataframe.</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sml_small.utils.pandas_wrapper</span><span class="w"> </span><span class="kn">import</span> <span class="n">wrapper</span>

<span class="n">datafile</span> <span class="o">=</span> <span class="s2">&quot;totals_and_components_input_data_example.csv&quot;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">datafile</span><span class="p">)</span>

<span class="c1"># Specify all columns to be appended to output dataframe</span>
<span class="n">totals_and_components_output_columns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;abs_diff&quot;</span><span class="p">,</span>
    <span class="s2">&quot;perc_low&quot;</span><span class="p">,</span>
    <span class="s2">&quot;perc_high&quot;</span><span class="p">,</span>
    <span class="s2">&quot;final_total&quot;</span><span class="p">,</span>
    <span class="s2">&quot;final_components&quot;</span><span class="p">,</span>
    <span class="s2">&quot;tcc_marker&quot;</span>    
    <span class="p">]</span>

<span class="n">totals_and_components_output</span> <span class="o">=</span> <span class="n">wrapper</span><span class="p">(</span>
    <span class="n">input_frame</span> <span class="o">=</span> <span class="n">df</span><span class="p">,</span>
    <span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;totals_and_components&quot;</span><span class="p">,</span>
    <span class="n">output_columns</span> <span class="o">=</span> <span class="n">totals_and_components_output_columns</span><span class="p">,</span>
    <span class="n">unique_identifier_column</span> <span class="o">=</span> <span class="s2">&quot;identifier&quot;</span><span class="p">,</span>
    <span class="n">total_column</span> <span class="o">=</span> <span class="s2">&quot;total&quot;</span><span class="p">,</span>
    <span class="n">components_list_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;comp_1&quot;</span><span class="p">,</span><span class="s2">&quot;comp_2&quot;</span><span class="p">,</span><span class="s2">&quot;comp_3&quot;</span><span class="p">,</span><span class="s2">&quot;comp_4&quot;</span><span class="p">],</span> 
    <span class="n">amend_total_column</span> <span class="o">=</span> <span class="s2">&quot;amend_total&quot;</span><span class="p">,</span>
    <span class="n">predictive_column</span> <span class="o">=</span> <span class="s2">&quot;predictive&quot;</span><span class="p">,</span>
    <span class="n">precision</span> <span class="o">=</span> <span class="s2">&quot;precision&quot;</span><span class="p">,</span>
    <span class="n">auxiliary_column</span> <span class="o">=</span> <span class="s2">&quot;auxiliary&quot;</span><span class="p">,</span>
    <span class="n">absolute_threshold_column</span> <span class="o">=</span> <span class="s2">&quot;absolute_difference_threshold&quot;</span><span class="p">,</span>
    <span class="n">percentage_threshold_column</span> <span class="o">=</span> <span class="s2">&quot;percentage_difference_threshold&quot;</span>
    <span class="p">)</span>

<span class="c1"># Save the output dataframe to a csv file</span>
<span class="n">totals_and_components_output</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span>
    <span class="s2">&quot;totals_and_components_output_data_example.csv&quot;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="methodology">
<h1>Methodology<a class="headerlink" href="#methodology" title="Link to this heading">#</a></h1>
<section id="terminology">
<h2>Terminology<a class="headerlink" href="#terminology" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Contributor – A member of the sample; identified by a unique identifier</p></li>
<li><p>Record – A set of values for each contributor and period</p></li>
<li><p>Target Variable – The variable of interest that the method is working on, the total or components as determined by the Amend Total variable</p></li>
<li><p>Target Record – A contributor’s record in the target period</p></li>
<li><p>Predictive Variable – A value used as a predictor for a contributor’s target variable</p></li>
<li><p>Predictive Record – The record containing a contributor’s predictive value</p></li>
<li><p>Auxiliary variable – The variable used as a predictor for a contributor’s target variable, where the predictive value is not available</p></li>
<li><p>Responder – A contributor who has responded to the survey within a given period</p></li>
<li><p>Precision - The precision value determines the level of accuracy for our floating point calculations</p></li>
</ul>
</section>
<section id="statistical-process-flow-formal-definition">
<h2>Statistical Process Flow / Formal Definition<a class="headerlink" href="#statistical-process-flow-formal-definition" title="Link to this heading">#</a></h2>
<p>This method firstly identifies if a given totals and components
relationship has not been satisfied for a given contributor in
the target period. If so, the method will determine
whether the difference observed is within an acceptable tolerance.
This tolerance is determined in one of three different ways:</p>
<ol class="arabic simple">
<li><p>If the absolute difference between the sum of the components and its
corresponding predictive total is less than or equal to the predefined threshold</p></li>
<li><p>If the predictive total is within an acceptable absolute percentage of the
components sum and an absolute difference is not considered</p></li>
<li><p>If the absolute difference described above is greater than the
predefined threshold but the predictive total is within an acceptable
absolute percentage of the components sum</p></li>
</ol>
<p>If the above is satisfied, an automatic correction will be made depending
on the Amend Total variable. If the above is not satisfied and the
method is being applied to returned data, then the responder is contacted
for confirmation. If the method is applied to data that is not returned
data e.g., imputed data, then the thresholds can be set to a maximum
value, allowing the method to automatically correct all cases where
the total does not equal the sum of the components.</p>
<p>The rationale for automatically correcting totals/components can vary by
data type. For example, with respondent data, it may be preferred to
only automatically correct data if there is a small difference between
the predictive and component variables sum in the target period as it is a
cost-effective approach to data editing. However, if a difference greater
than a set threshold is observed between the predictive variable and the sum
of the component variables in the target period, then it may be preferred to not
automatically correct data in favour of re-contacting the respondent to
correct the data directly.</p>
<p>If the predictive total is missing, then the method is not
applied, unless it is appropriate to use an auxiliary variable that
is well correlated with the target variable. The auxiliary
variable should not be read into the data if the user does not require it.
If both variables are missing, then an appropriate marker will be output
by the method.</p>
<p><strong>Error Detection</strong></p>
<p>If a total for the target period does not equal the sum of its corresponding
components in the target period for a given contributor and the components
sum is greater than
zero, then depending on the approach chosen, the method checks whether
the differences observed are within an acceptable tolerance. This tolerance
can be determined by an absolute difference, a percentage difference or a
combination of both.</p>
<p>If components sum is equal to zero and the user has selected to amend the
total variable (Amend Total = TRUE), then the correction should not be applied.
See the section on Zero Cases for more details.</p>
<p>The predictive period value can either be a cleaned return, an impute
or a construction. If this data is not available, then an auxiliary
variable should only be used when an appropriate
auxiliary variable exists, and is populated by the user. For example,
when checking employment data, ONS business surveys use a register-based
annual auxiliary variable only for surveys with annual periodicity,
when there is no predictive variable available as this variable is well
correlated with the target variable. The predictive variable
should take priority over the auxiliary variable. Otherwise,
the method should not run if there is no predictive period data available.</p>
<p><strong>Error Correction</strong></p>
<p>If the selected condition(s) as described  are
satisfied, then the target variable will be corrected, depending
on which target variable has been selected:</p>
<ol class="arabic simple">
<li><p>If Amend Total = FALSE, then the components are automatically corrected
for the target period to be equal to the total in the target period.</p></li>
<li><p>If Amend Total = TRUE, then the total is automatically corrected for
the target period to equal the sum of the components in the target period.</p></li>
</ol>
<p>The above should be applied if both the sum of the components and target period
total are both greater than zero. Else, see the section on Zero Cases.</p>
<p>If the chosen conditions are not satisfied, then no correction
is applied, and the responder is recontacted for confirmation if the
target variable is a returned value.</p>
<p><strong>Zero Cases</strong></p>
<p>Some cases where either the target period total or the components sum equals
zero need to be treated differently from as described previously
depending on the case as detailed below:</p>
<ol class="arabic simple">
<li><p>If target total &gt; 0 and components sum = 0 and amend total = TRUE:
No correction should be applied in this case. A total only may be provided
if the component breakdown is unknown so would not want to remove true
values. A suitable marker will be output by the method.</p></li>
<li><p>If target total &gt; 0 and components sum = 0 and amend total = FALSE: In this
case, the proportions of the true components are unknown so the method cannot
apply a correction. A suitable marker will be output by the method.</p></li>
<li><p>If target total = 0 and components sum &gt; 0 and amend total = TRUE: The total
should be corrected if the difference observed is within the tolerances
determined by the detection method. Else, the difference should be flagged for
manual checking.</p></li>
<li><p>If target total = 0 and components &gt; 0 and amend total = FALSE. Apply
correction to override the components with zeros if the difference observed is
within the tolerances determined by the detection method. Else, the difference
should be flagged for manual checking.</p></li>
</ol>
<section id="calculations">
<h3>Calculations<a class="headerlink" href="#calculations" title="Link to this heading">#</a></h3>
<p><strong>1. Error Detection Calculations</strong></p>
<p>For all error detection approaches, the method initially identifies contributors where the following is
not satisfied for <em>n</em> components at time <em>t</em>:</p>
<div class="math notranslate nohighlight">
\[ \large y_{1, t} + \dots + y_{n, t} = y_{total, t} \]</div>
<p>If the above is satisfied, then no error is detected, and the method stops.
Otherwise, the error detection process will proceed depending on the chosen approach.</p>
<p><strong>1.1 Absolute Difference</strong></p>
<p>If the condition described in section 1 is not satisfied and the sum of the
components is not equal to zero, the method then checks whether the
following is satisfied for a given contributor:</p>
<div class="math notranslate nohighlight">
\[ \large |(y_{1, t} + \dots + y_{n, t}) - y_{total,\ predictive}|
 \leq x_{absolute} \]</div>
<p>Where <span class="math notranslate nohighlight">\(y_{1, t}\)</span> to <span class="math notranslate nohighlight">\(y_{n, t}\)</span> are the <em>n</em> corresponding components
of the total <span class="math notranslate nohighlight">\(y_{total, t}\)</span>, <span class="math notranslate nohighlight">\(y_{total, predictive}\)</span> is the total for the
predictive period and <span class="math notranslate nohighlight">\(x_{absolute}\)</span> is the predefined threshold for
the absolute difference.</p>
<p>If the predictive value is missing, then <span class="math notranslate nohighlight">\(y_{total, predictive}\)</span> should
be replaced with the auxiliary variable, if
required by the user.</p>
<p><strong>1.2 Percentage Difference</strong></p>
<p>Where the condition described in section 1 is not satisfied and the sum
of the components is not equal to zero, the method then checks
whether the following is satisfied for a given contributor:</p>
<p>Let <span class="math notranslate nohighlight">\(y_{1,t} +...+ y_{n,t} = y_{derived}\)</span>, then:</p>
<div class="math notranslate nohighlight">
\[ \large low_{percent} \leq y_{total,\ predictive} \leq high_{percent} \]</div>
<p>Where,</p>
<div class="math notranslate nohighlight">
\[ \large low_{percent} = y_{derived} - (y_{derived}*x_{percent}) \]</div>
<div class="math notranslate nohighlight">
\[ \large high_{percent} = y_{derived} + (y_{derived}*x_{percent}) \]</div>
<p>Where <span class="math notranslate nohighlight">\(x_{percent}\)</span> is the predefined percentage threshold
represented as a decimal.</p>
<p>If the predictive value is missing, then <span class="math notranslate nohighlight">\(y_{total, predictive}\)</span>
should be replaced with the auxiliary variable, if
required by the user.</p>
<p><strong>1.3 Combined Error Detection</strong></p>
<p>The user may choose to use either the absolute
difference or the percentage difference in isolation. If the user chooses
to combine both methods, then the absolute difference check should first
be applied. If the absolute difference is within the acceptable tolerance,
then the method stops, and the correction is applied. If the absolute
difference is greater than the tolerance, then the percentage check is
applied.</p>
<p>If the percentage check is within an acceptable tolerance, then the
correction is applied.</p>
<p>If the percentage check is outside of the acceptable tolerance, then
the contributor is flagged for manual checking.</p>
<p><strong>2. Error Correction Calculation</strong></p>
<p>If the conditions described in the subsections of section 1 are satisfied
and the Amend Total variable = FALSE (amend the components), then
for a given contributor:</p>
<div class="math notranslate nohighlight">
\[ \large y_{1, t} + \dots + y_{n, t} = y_{total, t} \]</div>
<p>Where <span class="math notranslate nohighlight">\(y_{1, t}\)</span> to <span class="math notranslate nohighlight">\(y_{n, t}\)</span> are prorated to
equal <span class="math notranslate nohighlight">\(y_{total, t}\)</span>. For a given component <span class="math notranslate nohighlight">\(y_{k,t}\)</span>, the adjusted
<span class="math notranslate nohighlight">\(\hat{y}_{k,t}\)</span> is calculated by:</p>
<div class="math notranslate nohighlight">
\[ \large \hat{y}\_{k,t} = \Bigl(\frac{y_{k,t}}{y_{1, t} + \dots + y_{n, t}}
 \Bigl) * y_{total, t} \]</div>
<p>If the conditions in subsections 1.1 to 1.3 are satisfied
and the Amend Total variable = TRUE (amend the total), then
for a given contributor, the adjusted
<span class="math notranslate nohighlight">\(\hat{y}_{total,t}\)</span> is calculated by:</p>
<div class="math notranslate nohighlight">
\[ \large \hat{y}\_{total, t} = y_{1, t} + \dots + y_{n, t} \]</div>
<p>If the difference between the predictive total and the sum of the components
is greater than the thresholds, then the data is not automatically corrected,
and the data is flagged for manual checking.</p>
<p><strong>Core mathematical Corrections</strong></p>
<p>In summary, total correction is:</p>
<p><code class="docutils literal notranslate"> <span class="pre">final_total</span> <span class="pre">=</span> <span class="pre">sum_of_components</span> </code></p>
<p>and component correction is:</p>
<p><code class="docutils literal notranslate"> <span class="pre">final_component</span> <span class="pre">=</span> <span class="pre">(original_component</span> <span class="pre">/</span> <span class="pre">sum_of_components)</span> <span class="pre">*</span> <span class="pre">total</span> </code></p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="additional-information">
<h1>Additional Information<a class="headerlink" href="#additional-information" title="Link to this heading">#</a></h1>
<p>The ONS Statistical Methods Library at <a class="reference external" href="https://statisticalmethodslibrary.ons.gov.uk/">https://statisticalmethodslibrary.ons.gov.uk/</a>
contains:</p>
<ul class="simple">
<li><p>Further information about the methods including a link to the GitHub repository which contains detailed API information as part of the method code.</p></li>
<li><p>Information about other methods available through the library.</p></li>
</ul>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Link to this heading">#</a></h2>
<p>Unless stated otherwise, the SML codebase is released under the MIT License. This covers both the codebase and any sample code in the documentation.</p>
<p>The documentation is available under the terms of the Open Government 3.0 license.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./public_guides"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="ThousandPoundCorrection.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Thousand Pound Correction in Python</p>
      </div>
    </a>
    <a class="right-next"
       href="../AccessibilityStatement.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Accessibility Statement</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Totals and Components in Python</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#sml-user-guide">SML User Guide</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#user-notes">User Notes</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#finding-and-installing-the-method">Finding and Installing the method</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#requirements-and-dependencies">Requirements and Dependencies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#assumptions-and-validity">Assumptions and Validity</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-use-the-method">How to Use the Method</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method-input">Method Input</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method-output">Method Output</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-synthetic-data">Example (Synthetic) Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#worked-example">Worked Example</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#methodology">Methodology</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#terminology">Terminology</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#statistical-process-flow-formal-definition">Statistical Process Flow / Formal Definition</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculations">Calculations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-information">Additional Information</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#license">License</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By ONS Statistical Methods Library
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>